/*! BUILD: 2015-07-21 */
dojo.ready(function(){"use strict";function a(a,b){var c=document.createElement("script");c.type="text/javascript",c.readyState?c.onreadystatechange=function(){"loaded"===c.readyState||"complete"===c.readyState?(c.onreadystatechange=null,b()):"loading"!==c.readyState&&(c.onreadystatechange=null,b())}:(c.onload=function(){b()},c.onerror=function(){b()}),c.src="scripts/"+a+"?v="+m,document.getElementsByTagName("head")[0].appendChild(c)}function b(a){function b(){f+=1,f===e&&a&&a()}function c(a,b){return Common[a]&&Common[a][lan]?Common[a][lan][b]||"":""}var d=[{name:"controllers"},{name:"constants_zh_CN",map:"constants",lan:"C"},{name:"constants_en_US",map:"constants",lan:"E"},{name:"externUrl_zh_CN",map:"urls",lan:"C"},{name:"externUrl_en_US",map:"urls",lan:"E"}],e=d.length,f=0;Common.constants={},Common.urls={},CU.getConst=function(a){return $.trim(c("constants",a))},CU.getUrl=function(a){return $.trim(c("urls",a))},CU.get20Menu=function(a){return c("menu15To20",a)},$.each(d,function(a,c){$.ajax({url:"config/"+c.name+".json?v="+m,type:"get"}).then(function(a){"controllers"===c.name?Common.controllerMap=a:Common[c.map][c.lan]=a,b()})})}var c,d,e,f,g,h,i,j,k,l,m="20150721080707557";if(dojo.locale="zh",window.location.href.indexOf("?")>-1)for(c=decodeURIComponent(window.location.href).substr(window.location.href.indexOf("?")+1),d=c.split(/&/),f=d.length,e=0;f>e;e++)switch(g=d[e].split(/\=/),h=g[0],i=g[1],0===i.lastIndexOf("en",0)&&(i="en",window.lan="E",document.getElementsByTagName("html")[0].className="en"),0===i.lastIndexOf("zh",0)&&(i="zh",window.lan="C"),h){case"locale":dojo.locale=i;break;case"dir":document.getElementsByTagName("html")[0].dir=i;break;case"action":window.triggerAction=i;break;case"login":k=i;break;case"segment":l=i,window.segment=l}b(function(){function b(c,d){if("undefined"==typeof Common.controllers[c])return a(Common.controllerMap[c],function(){b(c,d)});h.push(new Common.controllers[c]({el:$("<div></div>").attr("id",c+"_"+Common.getIdentityId()).appendTo(d?"#full-container":"#content")})),Common.mainAction=h;var e=c;c.toUpperCase().match(/^MENU_\d+/gi)&&(e="MENU_X"),Common.currentActionType=e,"InsuranceProductQuery"!=e||j||a("util/constant.js",function(){j=!0})}function c(c,d){g=c;for(var e=0;e<h.length;e++)h[e]&&($("div.SecEditCtrl").empty(),h[e].release(),h[e]=null);if("undefined"==typeof Common.controllers[c]){if("undefined"==typeof Common.controllerMap[c])throw new Error("Undefined: Common.controllers."+c);a(Common.controllerMap[c],function(){b(c,d)})}else b(c,d)}function d(a){new Common.controllers.SubMenu,Spine.trigger("showSubmenu",a)}function e(a,b){if(a.setSelectionRange)a.setSelectionRange(b,b);else if(a.createTextRange){var c=a.createTextRange();c.collapse(!0),c.moveEnd("character",b),c.moveStart("character",b),c.select()}}function f(){var a=$(document.body).width();a>=1600?$(document.body).addClass("w1600"):($(document.body).removeClass("w1600"),a>=1200?$(document.body).addClass("w1200"):$(document.body).removeClass("w1200"))}var g,h=[],i=document.cookie.split(";");$.each(i,function(){var a=$.trim(this).split("=");"actionName"===$.trim(a[0])&&a[1]&&(window.triggerAction=a[1],document.cookie="actionName=;path=/")}),k?new Common.controllers.CardWelcome:(DateUtil.getCurrentTime(function(a){g_today.dateObject=new Date(a.date),g_today.day=g_today.dateObject.getDate(),g_today.month=g_today.dateObject.getMonth()+1,g_today.year=g_today.dateObject.getFullYear()}),Common.welcome=new Common.controllers.Welcome(function(){Common.menu.instance=new Common.controllers.Menu,Common.header=new Common.controllers.Header;new Common.controllers.RelevanceForQuery}),Spine.bind("showContent",c),Spine.one("showSubmenu",d)),CU.changeLan($("div.bu-wrapper")),Common.triggerAction=function(a){Common.triggerSubMenuAuto=!1;var b,c,d,e,f,g,h,i,j,k,l,m;for(b in Common.menu.MenuHash)if(c=Common.menu.MenuHash[b],isArray(c))for(g=c.length,k="#nav a[key="+b+"]",f=0;g>f;f++){if(d=c[f],l="div.aside dt a span[controller="+d.controller+"]",d.controller===a){j=[k,l];break}if(d.submenu)for(i=d.submenu.length,h=0;i>h;h++)if(e=d.submenu[h],m="div.aside dd a[controller="+e.controller+"]",e.controller===a){j=[k,null,m];break}}if(j){for(f=0,g=j.length;g>f;f++)if(j[f]){if(0===f&&$(j[f+1]||j[f+2]).size()>0)continue;("#nav a[key=TransfersAndRemittances]"!==j[0]||Common.menu.instance.MobileWithdrawLoaded||1!==f)&&("#nav a[key=EnterpriseService]"!==j[0]||Common.menu.instance.EnterpriseServiceLoaded||1!==f)?$(j[f]).trigger("click"):Common.triggerActionDelay=function(){Common.triggerAction(a),Common.triggerActionDelay=null}}else if(null===j[f]&&1===f)if($(j[f+1]).closest("dl")){if(!$(j[f+1]).closest("dl").find("dt a").hasClass("current")){var n=$(j[f+1]).closest("dl").find("dt"),o=n.parent().children("dd");o.length>0?($("div.aside dl>dt>a").removeClass("current").removeClass("subclose"),$("div.aside dl>dd").hide(),n.addClass("current"),n.find("a").addClass("current"),n.parent().children("dd").css("display","block")):$(j[f+1]).closest("dl").find("dt a span").trigger("click")}}else Common.triggerActionDelay=function(){Common.triggerAction(a),Common.triggerActionDelay=null}}else("Welcome"===a||"WelcomePage"===a)&&$("#nav-home a[key=WelcomePage]").trigger("click");Common.triggerSubMenuAuto=!0},$(document.body).on("click",function(a){$(a.target).closest("div.sel-open")||$("div.sel-open>ul.list").slideUp(function(){$("div.sel-open").removeClass("sel-open"),$("div.sel-open>iframe.list").hide()})}),$(document.body).on("click","input[type=text],input[type=password]",function(){$(this).attr("__focus__")||($(this).attr("__focus__","true"),e(this,this.value.length))}).on("blur","input[type=text],input[type=password]",function(){$(this).removeAttr("__focus__")}),$("#welcome_print").on("click",function(){window.print()}),$(document).on("keydown","a",function(a){return a.which&&13!=a.which?void 0:!1}),window.onresize=f,f(),screen.height<=768&&$(document.body).addClass("wh768")}),dojo.isMac&&(document.body.className="mac")});