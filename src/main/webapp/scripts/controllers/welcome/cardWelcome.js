/*! BUILD: 2015-05-28 */
Common.controllers.CardWelcome=Spine.Controller.sub({el:"#main",preCID:"",randomCode:"",lock:"",isShow:"",events:{"click #btn_login_740822":"login","click #a_forgetusernameorpassword_740954,#btn_onlinedredge_740968":"BOC20Show"},ejsPath:{debitCardaAccountDetail:"templates/electronicBanking/debitCardAccountDetail.ejs",debitCardaTransDetail:"templates/electronicBanking/debitCardTransDetail.ejs",debitCardTransDetail_table:"templates/electronicBanking/debitCardTransDetail_table.ejs",debitCardCashTransDetail_table:"templates/electronicBanking/debitCardCashTransDetail_table.ejs",creditCardAccountDetail:"templates/electronicBanking/creditCardAccountDetail.ejs",creditCardUnsettledBil:"templates/electronicBanking/creditCardUnsettledBills.ejs",creditCardUnsettledBill_table:"templates/electronicBanking/creditCardUnsettledBills_table.ejs",creditCardStatement:"templates/electronicBanking/creditCardStatement.ejs",creditCardBilledTransDetail:"templates/electronicBanking/creditCardBilledTransDetail.ejs",creditCardBilledTransDetailList:"templates/electronicBanking/creditCardBilledTransDetailList.ejs",creditCardCashTransDetail:"templates/electronicBanking/creditCardTransDetail.ejs",login:"templates/electronicBanking/login.ejs"},init:function(){var a=this;a.loadedIpfor=!1,a.isLogout=!1,Common.LightBox.show(),Common.postRequest(new Model("PsnAccBocnetQryLoginInfo")).then(function(b){var c=CU.ajaxDataHandle(b);c?(Common.cardLoginInfo=c,$("#welcome-customerName").text(c.name),"C"==lan?($("#a_55_1164").show(),$("#a_56_1165").hide()):($("#a_55_1164").hide(),$("#a_56_1165").show()),a.welcome()):Common.LightBox.hide()}),$("#a_60_1169,#a_60_1170").on("click",function(a){a.preventDefault();var b=Common.cardLoginInfo,c=$("#pageNo em").text(),d=$(this).attr("href"),e={},f="loginName="+b.name+"&customerName="+b.name+"&mobile="+b.mobile+"&pageNo="+c+"&ErrorCode="+Common.Error.lastErrorCode;e.unEncryptData=f,Common.postRequest(new Model("PsnAccBocnetTransferDataEncrypt",e)).then(function(a){var b=CU.ajaxDataHandle(a);if(b){var c="encryptData="+b.encryptData,e=d+"?"+c,f=window.open(e,null,"toolbar=no, menubar=no,scrollbars=yes, location=no, status=no,resizable=yes,width=810,height=645");f.moveTo(Math.floor((screen.width-810)/2),Math.floor((screen.height-645)/2))}})}),$("#a_59_1168").on("click",function(){a.logout()}),$("#a_55_1164").on("click",function(){a.changeEn()}),$("#a_56_1165").on("click",function(){a.changeCn()}),$("#a_58_1167").on("click",function(){var a="help.html?locale="+("C"==lan?"zh_CN":"en_US");window.open(a,null,"toolbar=no, menubar=no,scrollbars=yes,resizable=yes, location=no, status=no,fullscreen=yes")}),$("#btn_onlinedredge_741000").on("click",function(b){a.BOC20Show(b)})},logout:function(){var a=this,b="";b?(Common.LightBox.show(),CU.changeLan($("#quit-dialog")),CU.setObjAbsCenter($("#quit-dialog").show()),$("#quit-confirm").off("click").on("click",function(){Common.postRequest(new Model("Logout")).then(function(a){CU.ajaxDataHandle(a),CU.isSuccesful(a)?($.removeCookie("jsessionid"),window.location.href="logout.html?title="+escape(CU.getDictNameByKey("l15794"))+"&locale="+localParam[lan]):(Common.LightBox.hide(),$("#quit-dialog").hide())})})):(Common.LightBox.show(),Common.postRequest(new Model("PsnAccBocnetLogout")).then(function(b){CU.ajaxDataHandle(b),CU.isSuccesful(b)?(a.isLogout=!0,$.removeCookie("jsessionid"),window.location.href="logout.html?title="+escape(CU.getDictNameByKey("l15794"))+"&locale="+localParam[lan]):Common.LightBox.hide()}))},welcome:function(){var a=this,b=Common.cardLoginInfo.accountType,c=Common.cardLoginInfo.eBankingFlag,d=Common.cardLoginInfo.isHaveEleCashAcct;if("119"==b)Common.postRequest(new Model("PsnAccBocnetQryDebitDetail",{accountSeq:Common.cardLoginInfo.accountSeq+""})).then(function(b){var e=CU.ajaxDataHandle(b);e?(e.accountNumber=Common.cardLoginInfo.accountNumber,1==d||"true"==d?(e.isHaveEleCashAcct="1",Common.postRequest(new Model("PsnAccBocnetQryEcashDetail",{accountSeq:Common.cardLoginInfo.accountSeq+""})).then(function(b){var d=CU.ajaxDataHandle(b);d&&$("#cardMain").html(a.ejsPath.debitCardaAccountDetail,{debitCard:e,eleCashCard:d},function(){Common.LightBox.hide(),CU.changeLan($("#cardMain")),a.debitCardTabControl(e),a.guid(c)})})):(e.isHaveEleCashAcct="0",$("#cardMain").html(a.ejsPath.debitCardaAccountDetail,{debitCard:e,eleCashCard:{}},function(){Common.LightBox.hide(),CU.changeLan($("#cardMain")),a.debitCardTabControl(e),a.guid(c)}))):Common.LightBox.hide()});else{var e={accountSeq:Common.cardLoginInfo.accountSeq+"",currency:""};Common.postRequest(new Model("PsnAccBocnetQryCrcdDetail",e)).then(function(e){var f=CU.ajaxDataHandle(e);if(f){f.accountType=b,Common.cardDescription=f.cardDescription,Common.accountIbkNum=f.accountIbkNum;var g=f.consumptionPoint+"";g.indexOf(".")>0&&(f.consumptionPoint=g.substring(0,g.indexOf("."))),1==d||"true"==d?Common.postRequest(new Model("PsnAccBocnetQryEcashDetail",{accountSeq:Common.cardLoginInfo.accountSeq+""})).then(function(b){var d=CU.ajaxDataHandle(b);d?(f.isHaveEleCashAcct="1",f.accountNumber=Common.cardLoginInfo.accountNumber,d.cashRemit||(d.cashRemit="00"),$("#cardMain").html(a.ejsPath.creditCardAccountDetail,{creditCard:f,eleCashCard:d},function(){Common.LightBox.hide(),CU.changeLan($("#cardMain")),a.creditCardTabControl(f),a.guid(c)})):Common.LightBox.hide()}):(f.isHaveEleCashAcct="0",f.accountNumber=Common.cardLoginInfo.accountNumber,$("#cardMain").html(a.ejsPath.creditCardAccountDetail,{creditCard:f,eleCashCard:{}},function(){Common.LightBox.hide(),CU.changeLan($("#cardMain")),a.creditCardTabControl(f),a.guid(c)}))}else Common.LightBox.hide()})}},debitCardTabControl:function(a){var b=this;$("#div_transaction_details_740993").on("click",function(){Common.LightBox.show(),DateUtil.getAccBocnetCurrentTime(function(c){a.eBankingFlag=Common.cardLoginInfo.eBankingFlag,$("#cardMain").html(b.ejsPath.debitCardaTransDetail,a,function(){b._cashRemitHashTable=new Common.Hashtable,b._cashRemitHashTable.clear();var d=[];a&&a.accountDetaiList&&a.accountDetaiList.length>0&&($.each(a.accountDetaiList,function(a,c){b._cashRemitHashTable.contains(c.currencyCode)||(d.push({key:c.currencyCode,val:"<span lan='kind_of_currencies_"+c.currencyCode+"'>"+CU.getDictNameByKey("kind_of_currencies_"+c.currencyCode)+"</span>"}),b._cashRemitHashTable.add(c.currencyCode,[]));var e=b._cashRemitHashTable.item(c.currencyCode);e.push(c.cashRemit)}),d&&(d=d.sort(function(a,b){return a.key>b.key?1:a.key<b.key?-1:0}))),b.sel_currency=new ITSelect({data:d,appendTo:$("#txt_pleaseselectcurrency_740970").empty(),defValue:"",defText:Common.ItSelectData.pleaseSelect,oddCls:"even",callback:function(){var a=this.val;if(b._cashRemitHashTable.contains(a)){var c=b._cashRemitHashTable.item(a);b.el.find("input[type=radio]").attr("disabled","disabled").attr("checked",!1),$.each(c,function(a,d){c.length>1?(b.el.find("input[type=radio]").removeAttr("disabled").removeClass("txt text-darkengray"),b.el.find("input[type=radio]").next().removeClass("text-darkengray")):("02"==d&&b.el.find("#rd_chaoorhui_740971_02").removeAttr("disabled").attr("checked",!0).next().removeClass("text-darkengray"),"01"==d&&(b.el.find("#rd_chaoorhui_740971_01").removeAttr("disabled"),1!=b.el.find("#rd_chaoorhui_740971_02").attr("checked")&&b.el.find("#rd_chaoorhui_740971_01").attr("checked",!0)))}),"001"==a?$("input[type=radio]").attr({checked:!1,disabled:"disabled"}).next().addClass("text-darkengray"):$("input[type=radio]").removeAttr("disabled").next().removeClass("text-darkengray")}}}),d.length>0&&b.sel_currency.setValue(d[0].key+"");var e="0";if("1"==a.isHaveEleCashAcct){var f=[],g="<span lan='payeraccount_"+a.accountType+"'>"+CU.getDictNameByKey("payeraccount_"+a.accountType)+"</span> ";g+="<span>"+StringUtil.maskAccount(a.accountNumber)+"</span> <span lan='payeraccount_"+a.accountIbkNum+"'>"+CU.getDictNameByKey("payeraccount_"+a.accountIbkNum)+"</span>";var h="<span lan='payeraccount_300'>"+CU.getDictNameByKey("payeraccount_"+a.accountType)+"</span> ";h+="<span>"+StringUtil.maskAccount(a.accountNumber)+"</span> <span lan='payeraccount_"+a.accountIbkNum+"'>"+CU.getDictNameByKey("payeraccount_"+a.accountIbkNum)+"</span>",f.push({key:a.accountType,val:g}),f.push({key:"300",val:h}),b.sel_account=new ITSelect({data:f,appendTo:$("#sel_pleaseselectaccount_740896").empty(),defValue:"",defText:Common.ItSelectData.pleaseSelect,oddCls:"even",callback:function(){"300"==this.val?(e="1",$("#txt_pleaseselectcurrency_740970").parent().hide(),$("span.ck-rd").parent().parent().hide(),"debit"==b.seledAccountType&&$("#debitCardTransDetail_table,#pager").hide()):(e="0",$("#txt_pleaseselectcurrency_740970").parent().show(),$("span.ck-rd").parent().parent().show(),"ecash"==b.seledAccountType&&$("#debitCardTransDetail_table,#pager").hide())}}),b.sel_account.setValue(f[0].key+"")}$("#date_enddate_740973").val(c.date).datepicker(),$("#date_start_date_740972").val(CU.Date.addDays(c.date,-7)).datepicker(),Common.LightBox.hide(),CU.changeLan($("#cardMain")),$("#div_account_information_740992").on("click",function(){Common.LightBox.show(),b.welcome()}),$("#btn_49_740974").on("click",function(){if(formValid.checkAll($("div.layout-title"))){if(CU.Date.diff($("#date_start_date_740972").val(),$("#date_enddate_740973").val())<0)return void Common.LightBox.showMessage(CU.getDictNameByKey("l35624"));if(CU.Date.diff($("#date_enddate_740973").val(),c.date)<0)return void Common.LightBox.showMessage(CU.getDictNameByKey("l8964"));if(!CU.Date.inThreeMonth($("#date_start_date_740972").val(),$("#date_enddate_740973").val()))return void Common.LightBox.showMessage(CU.getDictNameByKey("l6883"));Common.LightBox.show(),Common.postRequest(new Model("PsnAccBocnetCreateConversation")).then(function(c){var d=CU.ajaxDataHandle(c);if(d){var f={accountSeq:Common.cardLoginInfo.accountSeq+"",currency:b.sel_currency.val,cashRemit:"001"==b.sel_currency.val?"":$("input[type=radio]:checked").val(),startDate:$("#date_start_date_740972").val(),endDate:$("#date_enddate_740973").val()};if("1"==a.isHaveEleCashAcct&&"300"==b.sel_account.val)delete f.currency,delete f.cashRemit;else if("001"!=b.sel_currency.val&&!$("input[type=radio]:checked").val())return Common.LightBox.hide(),void Common.LightBox.showMessage(CU.getDictNameByKey("l5692"));b.model=new Model("1"==e?"PsnAccBocnetQryEcashTransDetail":"PsnAccBocnetQryDebitTransDetail",f,d),b.isEashQuery="1"==e?!0:!1,b.model.findPages=function(a,b,c){return b&&(this.attributes.params.pageSize=b+""),"PsnAccBocnetQryDebitTransDetail"==this.attributes.method&&(this.attributes.params._refresh=c?"true":"false"),this.attributes.params.currentIndex="PsnAccBocnetQryEcashTransDetail"==this.attributes.method?a+"":(a-1)*this.attributes.params.pageSize+"",this},Common.postRequest(b.model.findPages(1,b.isEashQuery?15:10,!0)).then(function(a){var c=CU.ajaxDataHandle(a);c?$("#debitCardTransDetail_table").html("1"==e?b.ejsPath.debitCardCashTransDetail_table:b.ejsPath.debitCardTransDetail_table,c,function(){if(b.seledAccountType="0"==e?"debit":"ecash","1"!=e){var a=$(".floatcontent");$.each(a,function(a,b){var c=$(b);c.width()>83&&(c.addClass("text-elli w90"),c.parent().hover(function(){var a=$(this).find(".floattip");if(a.length>0){var b=$(this).offset2().left+$(this).width()-4+"px",d=c.offset2().top-a.height()+c.height()/2+"px";$(this).addClass("postipsHover"),a.css({top:d,left:b})}},function(){$(this).removeClass("postipsHover")}))})}b.pager("#pager",c.recordNumber,"","1"==e?b.ejsPath.debitCardCashTransDetail_table:b.ejsPath.debitCardTransDetail_table,"1"!=e),Common.LightBox.hide(),CU.changeLan($("#debitCardTransDetail_table"))}).show():(b.el.find("#debitCardTransDetail_table").html("").hide(),b.el.find("#pager").hide(),Common.LightBox.hide())})}else Common.LigthBox.hide()})}}),"L"==Common.cardLoginInfo.eBankingFlag?(b.guid("L"),$("#cardMain").addClass("fl").removeAttr("style")):$("#cardMain").css("width","auto").removeClass("fl").siblings().hide()})})})},creditCardTabControl:function(a){var b=this;$(".creditCard_more").on("click",function(){$(this).parent().parent().next(".creditCard_more_info").show(),$(this).hide()}),$(".consumptionPoint").first().show(),$(".creditCard_summary").on("click",function(){var a=$(this).parent().parent();a.siblings("tbody").find(".creditCard_more").show(),a.hide()}),$("#div_futurebill_740845").on("click",function(){b.unsettledBill()}),$("#div_billedtrans_740846").on("click",function(){b.statement()}),$("a.detail").on("click",function(){Common.LightBox.show(),DateUtil.getAccBocnetCurrentTime(function(c){$("#cardMain").append(b.ejsPath.creditCardCashTransDetail,a,function(){$("#date_start_date_740828").val(CU.Date.addDays(c.date,-7)).datepicker(),$("#date_enddate_740829").val(c.date).datepicker(),CU.setObjAbsCenter($("#creditCardTransCashDetail")),CU.changeLan($("#creditCardTransCashDetail")),$("#btn_close_740842,.close").on("click",function(){$("#creditCardTransCashDetail").remove(),Common.LightBox.hide()}),$("#btn_49_740830").on("click",function(){if(formValid.checkAll($("#creditCardTransCashDetail"))){if(CU.Date.diff($("#date_start_date_740828").val(),$("#date_enddate_740829").val())<0)return void Common.LightBox.showMessage(CU.getDictNameByKey("l35624"));if(CU.Date.diff($("#date_enddate_740829").val(),c.date)<0)return void Common.LightBox.showMessage(CU.getDictNameByKey("l8964"));if(!CU.Date.inThreeMonth($("#date_start_date_740828").val(),$("#date_enddate_740829").val()))return void Common.LightBox.showMessage(CU.getDictNameByKey("l6883"));var a={accountSeq:Common.cardLoginInfo.accountSeq+"",startDate:$("#date_start_date_740828").val(),endDate:$("#date_enddate_740829").val(),pageSize:"15",currentIndex:"1",refresh:"true"};b.model=new Model("PsnAccBocnetQryEcashTransDetail",a),b.isEashQuery=!0,b.model.findPages=function(a,b){return b&&(this.attributes.params.pageSize=b+""),this.attributes.params.currentIndex=a+"",this},Common.LightBox.show(),Common.postRequest(b.model).then(function(a){var c=CU.ajaxDataHandle(a);c?$("#creditCardCashTransDetail_table").html(b.ejsPath.debitCardCashTransDetail_table,c,function(){b.pager("#pager",c.recordNumber,"",b.ejsPath.debitCardCashTransDetail_table),Common.LightBox.hide(),CU.changeLan($("#creditCardCashTransDetail_table"))}).show():(b.el.find("#creditCardCashTransDetail_table").html("").hide(),b.el.find("#pager").hide(),Common.LightBox.hide())})}})})})})},guid:function(a){var b=this;"R"==a?$("div.login-net").hide().prev().show():($("div.login-net").show().prev().hide(),$("#cardMain").addClass("fl").removeAttr("style"),$("div.login-net").html(this.ejsPath.login,function(){CU.changeLan($("div.login-net")),$("#txt_50518_740820").on("blur",function(){b.isLogout||Common.postRequest(new Model("PsnAccBocnetLogout")).then(function(a){CU.ajaxDataHandle(a),CU.isSuccesful(a)&&(b.isLogout=!0,b.getCIDAndCreatePass())})}),$(".login-ad-i").show()}))},getCIDAndCreatePass:function(){var a=this;Common.LightBox.show(),Common.postRequest(new Model("PSNCreatConversationLoginPre")).then(function(b){a.preCID=CU.ajaxDataHandle(b),Common.postRequest(new Model("PSNGetRandomLoginPre",a.preCID)).then(function(b){a.randomCode=CU.ajaxDataHandle(b),CU.isSuccesful(b)&&$("#psw_50506_740823").sec({mode:10,RandomKey_S:a.randomCode,width:150}),Common.LightBox.hide()})})},unsettledBill:function(){var a=this,b={accountSeq:Common.cardLoginInfo.accountSeq+""};Common.LightBox.show(),Common.postRequest(new Model("PsnAccBocnetCreateConversation")).then(function(c){var d=CU.ajaxDataHandle(c);d?(a.isEashQuery=!1,a.model=new Model("PsnAccBocnetQryCrcdUnsettledBills",b,d),a.model.findPages=function(a,b,c){return b&&(this.attributes.params.pageSize=b+""),this.attributes.params._refresh=c?"true":"false",this.attributes.params.currentIndex=(a-1)*this.attributes.params.pageSize+"",this},Common.postRequest(a.model.findPages(1,10,!0),new Model("PsnAccBocnetQryCrcdUnsettledTotal",{accountSeq:b.accountSeq+""})).then(function(b){var c=CU.ajaxDataHandle(b),d=CU.ajaxDataHandle(b,1);c&&d?(c.eBankingFlag=Common.cardLoginInfo.eBankingFlag,c.crcdUnsettledTotal=d,c.cardDescription=Common.cardDescription,c.cardNumber=Common.cardLoginInfo.accountNumber,c.accountIbkNum=Common.accountIbkNum,$("#cardMain").html(a.ejsPath.creditCardUnsettledBil,c,function(){$("#futrue_bill_detail").html(a.ejsPath.creditCardUnsettledBill_table,c,function(){a.pager("#pager",c.recordNumber,"",a.ejsPath.creditCardUnsettledBill_table),CU.changeLan($("#futrue_bill_detail")),Common.LightBox.hide(),$("#pager").next().show()}),$("#div_account_information_740844").on("click",function(){Common.LightBox.show(),a.welcome()}),$("#div_billedtrans_740846").on("click",function(){a.statement()}),CU.changeLan($("#cardMain")),$("#cardMain").css("width","auto").removeClass("fl").siblings().hide(),$("div.login-net").empty();"L"==Common.cardLoginInfo.eBankingFlag&&$("#btn_login_pay_740803").on("click",function(){a.login()})})):Common.LightBox.hide()})):Common.LightBox.hide()})},statement:function(){var a=this;Common.LightBox.show();var b={};b.cardDescription=Common.cardDescription,b.accountIbkNum=Common.accountIbkNum,b.cardNumber=Common.cardLoginInfo.accountNumber,b.eBankingFlag=Common.cardLoginInfo.eBankingFlag,$("#cardMain").html(a.ejsPath.creditCardStatement,b,function(){DateUtil.getAccBocnetCurrentTime(function(b){Common.LightBox.hide();for(var c=[],d=new Date(b.date),e=0;3>e;e++){var f=d.getFullYear()+"/"+(d.getMonth()+1<10?"0"+(d.getMonth()+1):d.getMonth()+1+"");c.push({key:f,val:f}),d.setDate(1),d.setMonth(d.getMonth()-1)}a.outAccountMonth=new ITSelect({data:c,appendTo:$("#sel_outaccountmonth_740750").empty(),defValue:"",defText:"",oddCls:"even",callback:function(){}}),a.outAccountMonth.setValue(c[0].key)}),$("#div_account_information_740844").on("click",function(){Common.LightBox.show(),a.welcome()}),$("#div_futurebill_740845").on("click",function(){a.unsettledBill()}),$("#btn_49_740751").on("click",function(){formValid.checkAll("#cardMain")&&a.statementQuery()}),CU.changeLan($("#cardMain")),"L"==Common.cardLoginInfo.eBankingFlag?(a.guid("L"),$("#cardMain").addClass("fl").removeAttr("style")):$("#cardMain").css("width","auto").removeClass("fl").siblings().hide()})},statementQuery:function(){var a=this,b={accountSeq:Common.cardLoginInfo.accountSeq+"",statementMonth:a.outAccountMonth.val};Common.LightBox.show(),Common.postRequest(new Model("PsnAccBocnetCreateConversation")).then(function(c){var d=CU.ajaxDataHandle(c);d?Common.postRequest(new Model("PsnAccBocnetQryCrcdStatement",b,d)).then(function(b){var c=CU.ajaxDataHandle(b);if(c){var e={creditcardId:c.crcdCustomerInfo.creditcardId,statementMonth:c.crcdCustomerInfo.billDate,accountType:Common.cardLoginInfo.accountType,primary:"",_refresh:"true",lineNum:"10",pageNo:"1"},f="",g=[];$.each(c.crcdAccountInfoList,function(a,b){return f=b.autoRepayAccount,""!=f?!1:void 0}),$.each(c.crcdBillInfoList,function(a,b){var c=b.toString(),d={};d.keyInfo=c.substring(c.indexOf("*")),g.push(d)}),c.arrybiiInformation=g,a.el.find("#billed_trans_detail").html(a.ejsPath.creditCardBilledTransDetail,{billedTrans:c,autoRepayAccount:f},function(){CU.changeLan(a.el.find("#billed_trans_detail"));var b=new Model("PsnAccBocnetQryCrcdStatementDetail",e,d);b.findPages=function(a,b,c){return this.attributes.params||(this.attributes.params={}),b&&(this.attributes.params.lineNum=b+""),this.attributes.params._refresh=c?"true":"false",this.attributes.params.currentIndex=(a-1)*this.attributes.params.lineNum+"",this},b.setCurrentIndex=function(a){return a&&(this.attributes.params.pageNo=a+""),this},Common.postRequest(b).then(function(c){var d=CU.ajaxDataHandle(c);if(CU.isSuccesful(c)){var e=a._sort(d.transList);e.length>0&&(d.transList=e),$("#billed_trans_detail_list").html(a.ejsPath.creditCardBilledTransDetailList,{detailData:d},function(){Common.LightBox.hide(),CU.changeLan(a.el.find("#billed_trans_detail_list")),a.el.find("#creditCardDetails__data_foot").show(),a.paging(a.ejsPath.creditCardBilledTransDetailList,b,"#billed_trans_detail_list","#creditCardDetails__data_foot",d.dealCount,1,d.primary)})}else a.el.find("#billed_trans_detail_list").html(a.ejsPath.creditCardBilledTransDetailList,{detailData:null},function(){CU.changeLan(a.el.find("#billed_trans_detail_list")),a.el.find("#creditCardDetails__data_foot").hide()})})}).show()}else a.el.find("#billed_trans_detail").empty().hide(),Common.LightBox.showMessage(CU.getDictNameByKey("l7906")),Common.LightBox.hide()}):Common.LightBox.hide()})},paging:function(a,b,c,d,e,f,g){var h=this,i={canvas:d,callbackFn:function(e){Common.LightBox.show(),b.attributes.params._refresh="false",b.attributes.params.primary=g,Common.postRequest(b.setCurrentIndex(e)).then(function(f){var g=CU.ajaxDataHandle(f);if(Common.LightBox.hide(),CU.isSuccesful(f)){var i=h._sort(g.transList);i.length>0&&(g.transList=i),h.el.find(c).html(a,{detailData:g},function(){h.paging(a,b,c,d,g.dealCount,e,g.primary),h.el.find(d).show(),CU.changeLan(h.el.find(c))})}else h.el.find(c).html(a,{detailData:null},function(){CU.changeLan(h.el.find(c)),h.el.find(d).empty().hide()})})},pageIndex:f,point:h,recordCount:e,pageSize:10},j=Pager.getInstance();j.init(i),$(d).show()},_sort:function(a){var b=[],c=[],d=new Common.Hashtable;if($.each(a,function(a,e){if("CNY"==e.acntType)b.push(e);else if(d.item(e.acntType))d.item(e.acntType).push(e);else{c.push(e.acntType);var f=new Array;f.push(e),d.add(e.acntType,f)}}),c.length>0){c.sort();for(var e=0;e<c.length;e++)for(var f=d.item(c[e]),g=0;g<f.length;g++)b.push(f[g])}return b},pager:function(a,b,c,d,e){var f=this,g={canvas:a,callbackFn:function(b){f.render(b,a,d,e)},pageIndex:1,point:f,recordCount:b,pageSize:f.isEashQuery?15:10},h=Pager.getInstance();h.init(g),b>0?$(a).show():$(a).hide()},render:function(a,b,c,d){var e=this;Common.LightBox.show(),Common.postRequest(e.model.findPages(a,e.isEashQuery?15:10)).then(function(a){var e=CU.ajaxDataHandle(a);Common.LightBox.hide();var f=$(b).prev();f.html(c,e,function(){if(d){var a=$(".floatcontent");$.each(a,function(a,b){var c=$(b);c.width()>83&&(c.addClass("text-elli w90"),c.parent().hover(function(){var a=$(this).find(".floattip");if(a.length>0){var b=$(this).offset2().left+$(this).width()-4+"px",d=c.offset2().top-a.height()+c.height()/2+"px";$(this).addClass("postipsHover"),a.css({top:d,left:b})}},function(){$(this).removeClass("postipsHover")}))})}CU.changeLan(f)})})},login:function(){var a="C"==lan?"zh":"en";Common.postRequest(new Model("PsnAccBocnetLogout")).then(function(b){CU.ajaxDataHandle(b);CU.isSuccesful(b)&&(window.location.href="/boc15/login.html?locale="+a)})},BOC20Show:function(a){var b=$(a).attr("init")||$(a.target).attr("init")||$(a).parent().attr("init");if(b){var c="C"==lan?"zh":"en";Common.postRequest(new Model("PsnAccBocnetLogout")).then(function(a){CU.ajaxDataHandle(a);CU.isSuccesful(a)&&(window.location.href="/boc15/login.html?locale="+c+"&init="+b)})}},changeEn:function(){$("#a_55_1164").hide(),$("#a_56_1165").show(),lan="E",window.lan_prev="C",$("html").addClass("en"),CU.changeLan()},changeCn:function(){$("#a_56_1165").hide(),$("#a_55_1164").show(),lan="C",window.lan_prev="E",$("html").removeClass("en"),CU.changeLan()}});